# 装饰器（@符号）风格路由说明

## 什么是装饰器？

装饰器是TypeScript的实验性功能，使用@符号标记。课件项目使用了两种装饰器：

### 1. 类装饰器 - @route('/path')
```typescript
@route('/api')
class ApiController {
  // 定义整个控制器的路由前缀
}
```

### 2. 方法装饰器 - @GET()、@POST()
```typescript
class ApiController {
  @route('/list')  // 具体路由路径
  @GET()           // HTTP方法
  async actionList(ctx: Context) {
    // 最终路由：GET /api/list
  }
}
```

## 对比两种方式

### 传统方式（我们项目当前使用）
```typescript
// 手动配置路由
router.get('/api/health', apiController.health.bind(apiController));
router.get('/api/info', apiController.info.bind(apiController));
```

优点：
- 简单直观，容易理解
- 不需要额外配置
- 控制权更强

缺点：
- 需要手动注册每个路由
- 代码较冗长

### 装饰器方式（课件项目使用）
```typescript
@route('/api')
class ApiController {
  @route('/health')
  @GET()
  async health(ctx: Context) {
    // 自动生成路由：GET /api/health
  }
}

// app.ts中自动加载
app.use(loadControllers('controllers/*.ts'));
```

优点：
- 声明式，更简洁
- 自动注册路由
- 面向切面编程（AOP）

缺点：
- 需要配置TypeScript装饰器支持
- 增加了复杂性
- 调试相对困难

## 为什么我们项目暂时不使用装饰器？

1. **TypeScript配置复杂** - 需要启用实验性装饰器功能
2. **依赖版本问题** - awilix-koa版本兼容性问题
3. **调试困难** - 装饰器的错误提示不够直观

## 总结

两种方式各有优势：
- **学习阶段**：建议使用传统方式，更容易理解原理
- **项目开发**：可以根据团队习惯选择装饰器方式（更现代化）

我们的项目已经成功运行传统方式的API，功能完整且稳定。装饰器风格是一个很好的进阶学习内容！