# My-BFF é¡¹ç›®å¼€å‘æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº **Koa.js + TypeScript** çš„ BFFï¼ˆBackend For Frontendï¼‰æœåŠ¡é¡¹ç›®ã€‚é¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–çš„ Node.js å¼€å‘æ¨¡å¼ï¼Œé›†æˆäº†ä¾èµ–æ³¨å…¥ã€æ¨¡æ¿å¼•æ“ã€é™æ€æ–‡ä»¶æœåŠ¡ç­‰åŠŸèƒ½ã€‚

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Koa.js 3.0.1** - è½»é‡çº§ Node.js Web æ¡†æ¶
- **TypeScript 5.9.2** - æä¾›ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›†
- **Node.js** - è¿è¡Œæ—¶ç¯å¢ƒ

### ä¸»è¦ä¾èµ–åº“
- **@koa/router 14.0.0** - Koa è·¯ç”±ä¸­é—´ä»¶
- **awilix 12.0.5** - ä¾èµ–æ³¨å…¥å®¹å™¨
- **awilix-koa 11.1.0** - Koa é›†æˆçš„ä¾èµ–æ³¨å…¥
- **nunjucks 3.2.4** - æ¨¡æ¿å¼•æ“
- **koa-nunjucks-2 3.0.2** - Koa çš„ Nunjucks ä¸­é—´ä»¶
- **koa-static 5.0.0** - é™æ€æ–‡ä»¶æœåŠ¡ä¸­é—´ä»¶
- **koa2-connect-history-api-fallback 0.1.3** - SPA è·¯ç”±å›é€€æ”¯æŒ

### å¼€å‘å·¥å…·
- **ts-node-dev 2.0.0** - å¼€å‘æœåŠ¡å™¨ï¼Œæ”¯æŒè£…é¥°å™¨å’Œçƒ­é‡è½½
- **nodemon 3.1.10** - è‡ªåŠ¨é‡å¯å¼€å‘æœåŠ¡å™¨
- **ts-node 10.9.2** - ç›´æ¥è¿è¡Œ TypeScript æ–‡ä»¶
- **@types/*** - TypeScript ç±»å‹å®šä¹‰æ–‡ä»¶

## é¡¹ç›®ç»“æ„

```
my-bff/
â”œâ”€â”€ src/                          # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ @types/                   # ç±»å‹å®šä¹‰æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ IApi.ts              # API æ¥å£å®šä¹‰
â”‚   â”‚   â””â”€â”€ koa-nunjucks-2.d.ts  # ç¬¬ä¸‰æ–¹åº“ç±»å‹å£°æ˜
â”‚   â”œâ”€â”€ controllers/              # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ homeController.ts     # é¦–é¡µæ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ userController.ts     # ç”¨æˆ·æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ apiController.ts      # APIæ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ decoratorController.ts # è£…é¥°å™¨é£æ ¼æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ services/                # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ IUserService.ts      # ç”¨æˆ·æœåŠ¡æ¥å£
â”‚   â”‚   â””â”€â”€ userService.ts       # ç”¨æˆ·æœåŠ¡å®ç°
â”‚   â”œâ”€â”€ views/                   # æ¨¡æ¿æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ index.html           # é¦–é¡µæ¨¡æ¿
â”‚   â”‚   â””â”€â”€ user.html            # ç”¨æˆ·é¡µé¢æ¨¡æ¿
â”‚   â”œâ”€â”€ public/                  # é™æ€æ–‡ä»¶ç›®å½•
â”‚   â”‚   â””â”€â”€ index.html           # é™æ€é¦–é¡µ
â”‚   â””â”€â”€ app.ts                   # åº”ç”¨å…¥å£æ–‡ä»¶
â”œâ”€â”€ dist/                        # ç¼–è¯‘è¾“å‡ºç›®å½•
â”œâ”€â”€ node_modules/                # ä¾èµ–åŒ…ç›®å½•
â”œâ”€â”€ package.json                 # é¡¹ç›®é…ç½®æ–‡ä»¶
â”œâ”€â”€ tsconfig.json               # TypeScript é…ç½®
â”œâ”€â”€ nodemon.json                # nodemon é…ç½®
â”œâ”€â”€ pnpm-lock.yaml              # pnpm é”æ–‡ä»¶
â”œâ”€â”€ pnpm-workspace.yaml         # pnpm å·¥ä½œåŒºé…ç½®
â””â”€â”€ killport.sh                 # ç«¯å£æ¸…ç†è„šæœ¬
```

## æ ¸å¿ƒæ¶æ„è®¾è®¡

### 1. åˆ†å±‚æ¶æ„
é¡¹ç›®é‡‡ç”¨ç»å…¸çš„ä¸‰å±‚æ¶æ„æ¨¡å¼ï¼š
- **Controller å±‚**: å¤„ç† HTTP è¯·æ±‚ï¼Œè°ƒç”¨æœåŠ¡å±‚ï¼Œè¿”å›å“åº”
- **Service å±‚**: ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œæ•°æ®æ“ä½œ
- **View å±‚**: æ¨¡æ¿æ¸²æŸ“ï¼Œç”¨æˆ·ç•Œé¢å±•ç¤º

### 2. ä¾èµ–æ³¨å…¥
ä½¿ç”¨ `awilix` å®ç°ä¾èµ–æ³¨å…¥ï¼š
```typescript
// å®¹å™¨é…ç½® (app.ts:39-48)
const container = createContainer();
container.register({
  userService: {
    resolve: () => new UserService(),
    lifetime: Lifetime.SINGLETON
  }
});
```

### 3. æ¥å£é©±åŠ¨å¼€å‘
é€šè¿‡ TypeScript æ¥å£ç¡®ä¿ç±»å‹å®‰å…¨ï¼š
```typescript
// æœåŠ¡æ¥å£å®šä¹‰ (IUserService.ts)
export interface IUserService {
  getUser(id: string): User;
}
```

## è¯¦ç»†å¼€å‘æŒ‡å—

### ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡

1. **ç¡®ä¿å·²å®‰è£… Node.js** (å»ºè®® 16.0+)
2. **å®‰è£… pnpm åŒ…ç®¡ç†å™¨**ï¼š
   ```bash
   npm install -g pnpm
   ```

### ç¬¬äºŒæ­¥ï¼šé¡¹ç›®åˆå§‹åŒ–

1. **å…‹éš†/ä¸‹è½½é¡¹ç›®**
2. **å®‰è£…ä¾èµ–**ï¼š
   ```bash
   pnpm install
   ```

### ç¬¬ä¸‰æ­¥ï¼šé¡¹ç›®é…ç½®æ–‡ä»¶è¯¦è§£

#### package.json é…ç½®è§£æ
```json
{
  "scripts": {
    "start": "node dist/app.js",      // ç”Ÿäº§ç¯å¢ƒå¯åŠ¨
    "build": "tsc",                   // ç¼–è¯‘ TypeScript
    "dev": "ts-node-dev --respawn --transpile-only src/app.ts"  // å¼€å‘ç¯å¢ƒå¯åŠ¨(æ”¯æŒè£…é¥°å™¨)
  }
}
```

#### tsconfig.json é…ç½®è§£æ
```json
{
  "compilerOptions": {
    "target": "es2020",               // ç¼–è¯‘ç›®æ ‡ç‰ˆæœ¬
    "module": "commonjs",             // æ¨¡å—ç³»ç»Ÿ
    "outDir": "./dist",               // è¾“å‡ºç›®å½•
    "rootDir": "./src",               // æºç ç›®å½•
    "strict": true                    // ä¸¥æ ¼ç±»å‹æ£€æŸ¥
  }
}
```

#### nodemon.json é…ç½®è§£æ
```json
{
  "watch": ["src"],                   // ç›‘å¬ç›®å½•
  "ext": "ts",                        // ç›‘å¬æ–‡ä»¶æ‰©å±•å
  "exec": "ts-node ./src/app.ts"      // æ‰§è¡Œå‘½ä»¤
}
```

### ç¬¬å››æ­¥ï¼šæ ¸å¿ƒæ–‡ä»¶å¼€å‘è¯¦è§£

#### 1. åº”ç”¨å…¥å£æ–‡ä»¶ (src/app.ts)

**å…³é”®æ­¥éª¤**ï¼š
1. **åˆ›å»º Koa åº”ç”¨å®ä¾‹** (app.ts:18)
2. **é…ç½®æ¨¡æ¿å¼•æ“** (app.ts:21-27)
3. **é…ç½®é™æ€æ–‡ä»¶æœåŠ¡** (app.ts:30)
4. **é…ç½® SPA è·¯ç”±å›é€€** (app.ts:33-36)
5. **è®¾ç½®ä¾èµ–æ³¨å…¥å®¹å™¨** (app.ts:39-48)
6. **é…ç½®è·¯ç”±** (app.ts:51-72)
7. **å¯åŠ¨æœåŠ¡** (app.ts:75-79)

**æ¨¡æ¿å¼•æ“é…ç½®**ï¼š
```typescript
app.use(nunjucks({
  ext: 'html',                        // æ¨¡æ¿æ–‡ä»¶æ‰©å±•å
  path: path.join(__dirname, 'views'), // æ¨¡æ¿æ–‡ä»¶è·¯å¾„
  nunjucksConfig: {
    trimBlocks: true,                 // å»é™¤å—å‘¨å›´çš„ç©ºç™½
  },
}));
```

**SPA è·¯ç”±å›é€€é…ç½®**ï¼š
```typescript
app.use(historyApiFallback({
  index: '/',                         // é»˜è®¤é¡µé¢
  whiteList: ['/api']                 // API è·¯ç”±ä¸å›é€€
}));
```

#### 2. æ§åˆ¶å™¨å¼€å‘ (controllers/)

**HomeController ç¤ºä¾‹**ï¼š
```typescript
export default class HomeController {
  async index(ctx: Context) {
    await ctx.render('index', {       // æ¸²æŸ“æ¨¡æ¿
      title: 'æ¬¢è¿æ¥åˆ°æˆ‘çš„ BFF é¡¹ç›®!',
    });
  }
}
```

**UserController ç¤ºä¾‹**ï¼š
```typescript
export default class UserController {
  private readonly userService: IUserService;

  constructor({ userService }: IUserControllerDeps) {
    this.userService = userService;   // ä¾èµ–æ³¨å…¥
  }

  async get(ctx: Context) {
    const userId = ctx.params.id;     // è·å–è·¯ç”±å‚æ•°
    const user = this.userService.getUser(userId);

    await ctx.render('user', {        // æ¸²æŸ“ç”¨æˆ·é¡µé¢
      title: 'ç”¨æˆ·è¯¦æƒ…é¡µ',
      user: user,
    });
  }
}
```

#### 3. æœåŠ¡å±‚å¼€å‘ (services/)

**æ¥å£å®šä¹‰** (IUserService.ts):
```typescript
export interface User {
  id: string;
  name: string;
  email: string;
}

export interface IUserService {
  getUser(id: string): User;
}
```

**æœåŠ¡å®ç°** (userService.ts):
```typescript
export class UserService implements IUserService {
  getUser(id: string): User {
    // æ¨¡æ‹Ÿæ•°æ®è¿”å›ï¼Œå®é™…é¡¹ç›®ä¸­ä¼šè¿æ¥æ•°æ®åº“
    return {
      id: id,
      name: `User-${id}`,
      email: `user${id}@example.com`,
    };
  }
}
```

#### 4. è§†å›¾æ¨¡æ¿å¼€å‘ (views/)

**Nunjucks æ¨¡æ¿è¯­æ³•ç¤ºä¾‹**ï¼š
```html
<!-- å˜é‡æ¸²æŸ“ -->
<h1>{{ title }}</h1>

<!-- å¯¹è±¡å±æ€§è®¿é—® -->
<p>ç”¨æˆ·å: {{ user.name }}</p>
<p>é‚®ç®±: {{ user.email }}</p>
```

### ç¬¬äº”æ­¥ï¼šè¿è¡Œå’Œæµ‹è¯•

#### å¼€å‘ç¯å¢ƒè¿è¡Œ
```bash
pnpm run dev
```
æœåŠ¡å¯åŠ¨åè®¿é—®ï¼šhttp://localhost:3000

#### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```bash
# ç¼–è¯‘ TypeScript
pnpm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡
pnpm start
```

#### æµ‹è¯•è·¯ç”±
- é¦–é¡µï¼š`http://localhost:3000/`
- ç”¨æˆ·é¡µé¢ï¼š`http://localhost:3000/user/123`

### ç¬¬å…­æ­¥ï¼šæ‰©å±•å¼€å‘

#### æ·»åŠ æ–°çš„æ§åˆ¶å™¨
1. **åˆ›å»ºæ§åˆ¶å™¨æ–‡ä»¶** `src/controllers/newController.ts`
2. **å®ç°æ§åˆ¶å™¨ç±»**
3. **åœ¨ app.ts ä¸­æ³¨å†Œè·¯ç”±**

#### æ·»åŠ æ–°çš„æœåŠ¡
1. **å®šä¹‰æœåŠ¡æ¥å£** `src/services/INewService.ts`
2. **å®ç°æœåŠ¡ç±»** `src/services/newService.ts`
3. **åœ¨å®¹å™¨ä¸­æ³¨å†ŒæœåŠ¡**
4. **åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨ä¾èµ–æ³¨å…¥**

#### æ·»åŠ æ–°çš„æ¨¡æ¿é¡µé¢
1. **åˆ›å»ºæ¨¡æ¿æ–‡ä»¶** `src/views/newPage.html`
2. **åœ¨æ§åˆ¶å™¨ä¸­è°ƒç”¨** `ctx.render('newPage', data)`

## å¼€å‘æœ€ä½³å®è·µ

### 1. ç±»å‹å®‰å…¨
- å§‹ç»ˆå®šä¹‰æ¥å£å’Œç±»å‹
- ä½¿ç”¨ TypeScript çš„ä¸¥æ ¼æ¨¡å¼
- ä¸ºç¬¬ä¸‰æ–¹åº“æä¾›ç±»å‹å£°æ˜æ–‡ä»¶

### 2. ä¾èµ–æ³¨å…¥
- é€šè¿‡æ¥å£å®šä¹‰ä¾èµ–å…³ç³»
- ä½¿ç”¨å®¹å™¨ç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ
- ä¿æŒå•ä¸€èŒè´£åŸåˆ™

### 3. é”™è¯¯å¤„ç†
- æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶
- è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
- ä¸ºç”¨æˆ·æä¾›å‹å¥½çš„é”™è¯¯é¡µé¢

### 4. å®‰å…¨è€ƒè™‘
- è¾“å…¥éªŒè¯å’Œæ¸…ç†
- CORS é…ç½®
- å®‰å…¨å¤´è®¾ç½®

## å¸¸è§é—®é¢˜æ’æŸ¥

### 1. ç«¯å£å ç”¨é—®é¢˜
```bash
# ä½¿ç”¨é¡¹ç›®æä¾›çš„è„šæœ¬æ¸…ç†ç«¯å£
./killport.sh 3000
```

### 2. ä¾èµ–å®‰è£…é—®é¢˜
```bash
# æ¸…ç†ç¼“å­˜é‡æ–°å®‰è£…
pnpm cache clean
rm -rf node_modules
pnpm install
```

### 3. ç±»å‹é”™è¯¯
- æ£€æŸ¥ TypeScript é…ç½®
- ç¡®ä¿ç±»å‹å®šä¹‰æ–‡ä»¶æ­£ç¡®
- ä½¿ç”¨ `pnpm run build` æ£€æŸ¥ç¼–è¯‘é”™è¯¯

## é¡¹ç›®ä¼˜åŠ¿

1. **ç±»å‹å®‰å…¨**: TypeScript æä¾›ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
2. **æ¶æ„æ¸…æ™°**: åˆ†å±‚è®¾è®¡ï¼ŒèŒè´£åˆ†ç¦»
3. **å¯ç»´æŠ¤æ€§**: ä¾èµ–æ³¨å…¥ï¼Œæ¥å£é©±åŠ¨
4. **å¼€å‘æ•ˆç‡**: çƒ­é‡è½½ï¼Œè‡ªåŠ¨ç¼–è¯‘
5. **ç°ä»£åŒ–**: ä½¿ç”¨æœ€æ–°çš„ Node.js ç”Ÿæ€å·¥å…·

## ä¸‹ä¸€æ­¥å‘å±•æ–¹å‘

1. **æ·»åŠ æ•°æ®åº“æ”¯æŒ** (MongoDB/MySQL)
2. **é›†æˆè®¤è¯æˆæƒ** (JWT/OAuth)
3. **æ·»åŠ  API æ–‡æ¡£** (Swagger)
4. **å¼•å…¥æµ‹è¯•æ¡†æ¶** (Jest)
5. **å®¹å™¨åŒ–éƒ¨ç½²** (Docker)
6. **æ·»åŠ æ—¥å¿—ç³»ç»Ÿ** (Winston)
7. **æ€§èƒ½ç›‘æ§** (APM)

è¿™ä¸ªé¡¹ç›®ä¸ºä½ æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ BFF æœåŠ¡å¼€å‘åŸºç¡€ï¼Œä½ å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±•æ›´å¤šåŠŸèƒ½ã€‚
## ğŸš€ å®Œæ•´è·¯ç”±è®¿é—®æŒ‡å—

### å¯åŠ¨æœåŠ¡
```bash
# å¼€å‘ç¯å¢ƒå¯åŠ¨ï¼ˆæ”¯æŒè£…é¥°å™¨å’Œçƒ­é‡è½½ï¼‰
pnpm run dev

# æœåŠ¡å¯åŠ¨æˆåŠŸåæ˜¾ç¤ºï¼š
# ğŸš€ æœåŠ¡å·²å¯åŠ¨ï¼Œæ­£åœ¨ç›‘å¬ 3000 ç«¯å£
# ğŸ”— è¯·è®¿é—® http://localhost:3000
```

### 1. é¡µé¢è·¯ç”± (è¿”å›HTMLé¡µé¢)

#### é¦–é¡µ
- **URL**: `http://localhost:3000/`
- **æ–¹æ³•**: GET
- **è¯´æ˜**: é¡¹ç›®é¦–é¡µï¼Œæ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
- **è¿”å›**: HTMLé¡µé¢

#### ç”¨æˆ·é¡µé¢
- **URL**: `http://localhost:3000/user/1`
- **æ–¹æ³•**: GET
- **å‚æ•°**: ç”¨æˆ·ID (å¯ä»¥æ˜¯ä»»æ„æ•°å­—)
- **è¯´æ˜**: ç”¨æˆ·è¯¦æƒ…é¡µé¢ï¼Œä½¿ç”¨æ¨¡æ¿æ¸²æŸ“
- **è¿”å›**: HTMLé¡µé¢

### 2. APIè·¯ç”± (è¿”å›JSONæ•°æ®)

#### ç³»ç»Ÿå¥åº·æ£€æŸ¥
```bash
curl http://localhost:3000/api/health
```
- **æ–¹æ³•**: GET
- **è¯´æ˜**: æ£€æŸ¥æœåŠ¡è¿è¡ŒçŠ¶æ€
- **è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "status": "healthy",
    "timestamp": "2024-09-15T16:00:00.000Z",
    "uptime": 42.096479833,
    "version": "1.0.0"
  },
  "message": "æœåŠ¡è¿è¡Œæ­£å¸¸"
}
```

#### ç³»ç»Ÿä¿¡æ¯
```bash
curl http://localhost:3000/api/info
```
- **æ–¹æ³•**: GET
- **è¯´æ˜**: è·å–ç³»ç»Ÿä¿¡æ¯

#### è·å–æ¨¡æ‹Ÿæ•°æ®
```bash
curl http://localhost:3000/api/mock-data
```
- **æ–¹æ³•**: GET
- **è¯´æ˜**: è·å–æ¨¡æ‹Ÿçš„æ–‡ç« æ•°æ®

#### è·å–å•ä¸ªç”¨æˆ·ä¿¡æ¯
```bash
curl http://localhost:3000/api/user/1
```
- **æ–¹æ³•**: GET
- **å‚æ•°**: ç”¨æˆ·ID
- **è¯´æ˜**: è·å–æŒ‡å®šç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯

#### è·å–æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨
```bash
curl http://localhost:3000/api/users
```
- **æ–¹æ³•**: GET
- **è¯´æ˜**: è·å–æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨
- **è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": [
    {
      "id": "1",
      "name": "Alice",
      "email": "alice@example.com"
    },
    {
      "id": "2", 
      "name": "Bob",
      "email": "bob@example.com"
    },
    {
      "id": "3",
      "name": "Charlie", 
      "email": "charlie@example.com"
    }
  ],
  "message": "è·å–ç”¨æˆ·åˆ—è¡¨æˆåŠŸ"
}
```

### 3. è£…é¥°å™¨è·¯ç”± (AOPé£æ ¼ï¼Œå®Œå…¨å¯ç”¨)

**æ³¨æ„**: è£…é¥°å™¨è·¯ç”±å·²å®Œå…¨é…ç½®å¹¶æµ‹è¯•é€šè¿‡ï¼Œä½¿ç”¨@routeå’Œ@GETç­‰è£…é¥°å™¨å®ç°å£°æ˜å¼è·¯ç”±ã€‚

#### è£…é¥°å™¨æ§åˆ¶å™¨é¦–é¡µ
```bash
curl http://localhost:3000/decorator
```
- **æ–¹æ³•**: GET
- **è¯´æ˜**: è£…é¥°å™¨é£æ ¼çš„æ§åˆ¶å™¨é¦–é¡µ
- **çŠ¶æ€**: âœ… å®Œå…¨å¯ç”¨
- **è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "controller": "DecoratorController",
    "style": "AOPè£…é¥°å™¨é£æ ¼",
    "routes": [
      "GET /decorator - æ§åˆ¶å™¨é¦–é¡µ",
      "GET /decorator/hello - é—®å€™æ¥å£",
      "GET /decorator/user/:id - è·å–ç”¨æˆ·ä¿¡æ¯",
      "POST /decorator/data - åˆ›å»ºæ•°æ®"
    ]
  },
  "message": "è£…é¥°å™¨æ§åˆ¶å™¨é¦–é¡µ"
}
```

#### è£…é¥°å™¨é—®å€™æ¥å£
```bash
curl http://localhost:3000/decorator/hello
```
- **æ–¹æ³•**: GET
- **è¯´æ˜**: è£…é¥°å™¨é£æ ¼çš„é—®å€™æ¥å£
- **çŠ¶æ€**: âœ… å®Œå…¨å¯ç”¨

#### è£…é¥°å™¨ç”¨æˆ·ä¿¡æ¯
```bash
curl http://localhost:3000/decorator/user/123
```
- **æ–¹æ³•**: GET
- **å‚æ•°**: ç”¨æˆ·ID
- **è¯´æ˜**: è£…é¥°å™¨é£æ ¼è·å–ç”¨æˆ·ä¿¡æ¯
- **çŠ¶æ€**: âœ… å®Œå…¨å¯ç”¨
- **è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "id": "123",
    "name": "è£…é¥°å™¨ç”¨æˆ·123",
    "email": "decorator-user123@example.com"
  },
  "message": "è£…é¥°å™¨é£æ ¼è·å–ç”¨æˆ· 123 ä¿¡æ¯æˆåŠŸ"
}
```

### 4. å¿«é€Ÿæµ‹è¯•è„šæœ¬

åˆ›å»ºæµ‹è¯•è„šæœ¬ `test-apis.sh`:
```bash
#!/bin/bash
echo "=== æµ‹è¯•æ‰€æœ‰APIæ¥å£ ==="

echo "1. å¥åº·æ£€æŸ¥:"
curl -s http://localhost:3000/api/health | head -5

echo -e "\n2. ç³»ç»Ÿä¿¡æ¯:"
curl -s http://localhost:3000/api/info | head -5

echo -e "\n3. ç”¨æˆ·åˆ—è¡¨:"
curl -s http://localhost:3000/api/users | head -5

echo -e "\n=== æµ‹è¯•å®Œæˆ ==="
```

### 5. è·¯ç”±æ¶æ„è¯´æ˜

#### ä¼ ç»Ÿè·¯ç”± (å½“å‰ä½¿ç”¨)
- **é…ç½®æ–¹å¼**: æ‰‹åŠ¨é…ç½®ï¼Œæ˜ç¡®æ³¨å†Œ
- **ä½ç½®**: `src/app.ts` ç¬¬65-76è¡Œ
- **ä¼˜ç‚¹**: ç®€å•ç›´è§‚ï¼Œå®Œå…¨å¯æ§
- **çŠ¶æ€**: âœ… å®Œå…¨å¯ç”¨

#### è£…é¥°å™¨è·¯ç”± (ç°ä»£åŒ–æ–¹å¼)
- **é…ç½®æ–¹å¼**: æ³¨è§£é©±åŠ¨ï¼Œè‡ªåŠ¨å‘ç°
- **ä½ç½®**: `src/controllers/decoratorController.ts`
- **ä¼˜ç‚¹**: å£°æ˜å¼ï¼Œä»£ç æ›´ç®€æ´
- **çŠ¶æ€**: ğŸ”§ å¼€å‘ä¸­

### 6. å¼€å‘è°ƒè¯•æŠ€å·§

#### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3000

# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep node
```

#### é‡å¯æœåŠ¡
```bash
# å¼€å‘ç¯å¢ƒä¼šè‡ªåŠ¨é‡å¯ï¼Œä¹Ÿå¯æ‰‹åŠ¨é‡å¯
pnpm run dev
```

**å½“å‰çŠ¶æ€**:
- âœ… **ä¼ ç»Ÿè·¯ç”±**: å®Œå…¨å¯ç”¨ï¼ŒåŒ…å«é¡µé¢å’ŒAPI
- âœ… **è£…é¥°å™¨æ”¯æŒ**: æŠ€æœ¯æ ˆé…ç½®å®Œæˆ
- âœ… **è£…é¥°å™¨è·¯ç”±**: å®Œå…¨å¯ç”¨ï¼ŒAOPé£æ ¼å£°æ˜å¼è·¯ç”±

è¿™ä¸ºæ„å»ºå¤§å‹ Web åº”ç”¨å¥ å®šäº†åšå®çš„åŸºç¡€ï¼ğŸš€
